{"ast":null,"code":"import _slicedToArray from\"/Users/thinh/Desktop/timechart/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{render}from'@testing-library/react';import'../css/SubjectPicker.css';import Classnames from'classnames';import axios from'axios';import{useSelector,useDispatch}from'react-redux';import{setTimetable,setListSubject,unsetListSubject,setChosenSubject,unsetChosenSubject,setValidTimetable,setIsValidTimetable}from'../actions/index';function SubjectPicker(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),searchData=_useState2[0],setSearchData=_useState2[1];var chosenSubjectText=useRef(\"\");var listSubject=useSelector(function(state){return state.listSubjects;});var chosenSubject=useSelector(function(state){return state.chosenSubjects;});var validMatrix=useSelector(function(state){return state.validMatrix;});var isValidTimetable=useSelector(function(state){return state.isValidTimetable;});var timeOutObj=useRef();var dispatch=useDispatch();useEffect(function(){axios.get('http://localhost:7000/api/subjects').then(function(res){dispatch(setListSubject(res.data.subjects));setSearchData(res.data.subjects);}).catch(function(err){throw err;});},[]);function renderListSubject(data){return React.createElement(\"li\",{key:data.id,style:{cursor:'pointer'},onClick:onSubjectClickHandle.bind(this,data),className:Classnames(\"list-subject border-left-0 rounded-0 border-right-0 border-top-0 list-group-item\",\"list-subject border-left-0 rounded-0 border-right-0 border-top-0 list-group-item\",{\"custom-active\":chosenSubject.find(function(e){return e._id===data._id;})})},React.createElement(\"div\",null,React.createElement(\"span\",{className:\"pr-3 font-weight-bolder\"},data.code),React.createElement(\"span\",{className:\"pr-3\"},data.name),React.createElement(\"span\",{className:\"pr-3 font-weight-bold\"},data.ecturer),React.createElement(\"span\",{className:\"pr-3\"},data.credits,\" t\\xEDn ch\\u1EC9\"),React.createElement(\"span\",{className:\"pr-3 text-subject\"},\"Th\\u1EE9 \",data.dow===undefined?'*':data.dow),React.createElement(\"span\",{className:\"pr-3 text-subject\"},\"Ti\\u1EBFt \",data.lessons===\"\"?'*':data.lessons),React.createElement(\"span\",{className:\"pr-3\"},data.lang)));}function checkingValid(newSubject){var tempMatrix=validMatrix;var day=newSubject.dow;if(day===undefined||day==='*'||day===null){dispatch(setValidTimetable(tempMatrix));dispatch(setChosenSubject(newSubject));chosenSubjectText.current=chosenSubjectText.current.concat(newSubject.code+'\\n');return;}var lessons=newSubject.lessons==='*'?null:newSubject.lessons.split('').map(function(e){if(e==='0')return 10;return parseInt(e);});for(var i=0;i<lessons.length;++i){if(tempMatrix[lessons[i]-1][day-2]===false){tempMatrix[lessons[i]-1][day-2]=true;}else{clearTimeout(timeOutObj.current);dispatch(setIsValidTimetable(false));timeOutObj.current=setTimeout(function(){dispatch(setIsValidTimetable(true));},5000);return;}}dispatch(setValidTimetable(tempMatrix));dispatch(setChosenSubject(newSubject));chosenSubjectText.current=chosenSubjectText.current.concat(newSubject.code+'\\n');}function onSubjectClickHandle(data){if(!chosenSubject.find(function(e){return e._id===data._id;})){if(chosenSubject.find(function(e){return e.name===data.name;})){clearTimeout(timeOutObj.current);dispatch(setIsValidTimetable(false));timeOutObj.current=setTimeout(function(){dispatch(setIsValidTimetable(true));},5000);}else{checkingValid(data);}}else{var tempMatrix=validMatrix;var day=data.dow;if(day===undefined||day==='*'||day===null){dispatch(unsetChosenSubject(data));chosenSubjectText.current=chosenSubjectText.current.replace(data.code+'\\n','');return;}var lessons=data.lessons==='*'?null:data.lessons.split('').map(function(e){if(e==='0')return 10;return parseInt(e);});for(var i=0;i<lessons.length;++i){tempMatrix[lessons[i]-1][day-2]=false;}dispatch(unsetChosenSubject(data));chosenSubjectText.current=chosenSubjectText.current.replace(data.code+'\\n','');}}function onSubjectTextHandle(e){//dispatch(setListSubject(e.target.value));\n}function onButtonClickHandle(e){dispatch(setTimetable());e.preventDefault();}function onSearchChange(e){var sample=listSubject.filter(function(data){if(data.code.toLowerCase().includes(e.target.value.toLowerCase())||data.name.toLowerCase().includes(e.target.value.toLowerCase())){return true;}return false;});setSearchData(sample);}return React.createElement(\"div\",null,React.createElement(\"form\",null,!isValidTimetable?React.createElement(\"div\",{class:Classnames(\"alert alert-danger animation\"),role:\"alert\"},\"Th\\xF4ng tin kh\\xF4ng h\\u1EE3p l\\u1EC7 (M\\xF4n h\\u1ECDc \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c \\u0111\\u0103ng k\\xED ho\\u1EB7c th\\u1EDDi gian b\\u1ECB tr\\xF9ng)\"):React.createElement(\"label\",{htmlFor:\"\"},\"\\u0110i\\u1EC1n m\\xE3 m\\xF4n mu\\u1ED1n \\u0111\\u0103ng k\\xED (m\\u1ED7i m\\xE3 m\\xF4n n\\u1EB1m tr\\xEAn m\\u1ED9t d\\xF2ng)\"),React.createElement(\"textarea\",{value:chosenSubjectText.current,onChange:onSubjectTextHandle,className:\"form-control\",id:\"\",style:{resize:\"none\"},rows:\"5\"}),React.createElement(\"label\",{htmlFor:\"\"},\"Ch\\u1ECDn m\\xF4n mu\\u1ED1n \\u0111\\u0103ng k\\xED\"),React.createElement(\"div\",null,React.createElement(\"input\",{onChange:onSearchChange,className:\"form-control\",type:\"text\",placeholder:\"Search\",\"aria-label\":\"Search\"}),React.createElement(\"div\",{className:\"mt-2\"},React.createElement(\"ul\",{style:{height:'35vh',overflow:'scroll',overflowX:'hidden'},className:\"p-2 border rounded list-group\"},searchData.map(function(subject){if(subject){return renderListSubject(subject);}})))),React.createElement(\"div\",{className:\"d-flex justify-content-center mt-3\"},React.createElement(\"button\",{onClick:onButtonClickHandle,className:\"btn btn-dark\",type:\"submit\"},\"T\\u1EA1o th\\u1EDDi kho\\xE1 bi\\u1EC3u\"))));}export default SubjectPicker;","map":{"version":3,"sources":["/Users/thinh/Desktop/timechart/src/components/SubjectPicker.js"],"names":["React","useState","useEffect","useRef","render","Classnames","axios","useSelector","useDispatch","setTimetable","setListSubject","unsetListSubject","setChosenSubject","unsetChosenSubject","setValidTimetable","setIsValidTimetable","SubjectPicker","searchData","setSearchData","chosenSubjectText","listSubject","state","listSubjects","chosenSubject","chosenSubjects","validMatrix","isValidTimetable","timeOutObj","dispatch","get","then","res","data","subjects","catch","err","renderListSubject","id","cursor","onSubjectClickHandle","bind","find","e","_id","code","name","ecturer","credits","dow","undefined","lessons","lang","checkingValid","newSubject","tempMatrix","day","current","concat","split","map","parseInt","i","length","clearTimeout","setTimeout","replace","onSubjectTextHandle","onButtonClickHandle","preventDefault","onSearchChange","sample","filter","toLowerCase","includes","target","value","resize","height","overflow","overflowX","subject"],"mappings":"iHAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAwBC,SAAxB,CAAmCC,MAAnC,KAAgD,OAAhD,CACA,OAASC,MAAT,KAAuB,wBAAvB,CACA,MAAO,0BAAP,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,WAAR,CAAqBC,WAArB,KAAuC,aAAvC,CACA,OAAQC,YAAR,CAAsBC,cAAtB,CAAsCC,gBAAtC,CAAwDC,gBAAxD,CAA0EC,kBAA1E,CAA8FC,iBAA9F,CAAiHC,mBAAjH,KAA2I,kBAA3I,CAEA,QAASC,CAAAA,aAAT,EAAyB,eAEef,QAAQ,CAAC,EAAD,CAFvB,wCAEdgB,UAFc,eAEFC,aAFE,eAGrB,GAAMC,CAAAA,iBAAiB,CAAGhB,MAAM,CAAC,EAAD,CAAhC,CACA,GAAMiB,CAAAA,WAAW,CAAGb,WAAW,CAAC,SAAAc,KAAK,QAAIA,CAAAA,KAAK,CAACC,YAAV,EAAN,CAA/B,CACA,GAAMC,CAAAA,aAAa,CAAGhB,WAAW,CAAC,SAAAc,KAAK,QAAIA,CAAAA,KAAK,CAACG,cAAV,EAAN,CAAjC,CACA,GAAMC,CAAAA,WAAW,CAAGlB,WAAW,CAAC,SAAAc,KAAK,QAAIA,CAAAA,KAAK,CAACI,WAAV,EAAN,CAA/B,CACA,GAAMC,CAAAA,gBAAgB,CAAGnB,WAAW,CAAC,SAAAc,KAAK,QAAIA,CAAAA,KAAK,CAACK,gBAAV,EAAN,CAApC,CACA,GAAMC,CAAAA,UAAU,CAAGxB,MAAM,EAAzB,CACA,GAAMyB,CAAAA,QAAQ,CAAGpB,WAAW,EAA5B,CAEAN,SAAS,CAAC,UAAM,CACZI,KAAK,CAACuB,GAAN,CAAU,oCAAV,EACKC,IADL,CACU,SAAAC,GAAG,CAAI,CACTH,QAAQ,CAAClB,cAAc,CAACqB,GAAG,CAACC,IAAJ,CAASC,QAAV,CAAf,CAAR,CACAf,aAAa,CAACa,GAAG,CAACC,IAAJ,CAASC,QAAV,CAAb,CACH,CAJL,EAKKC,KALL,CAKW,SAAAC,GAAG,CAAE,CACR,KAAMA,CAAAA,GAAN,CACH,CAPL,EAQH,CATQ,CASN,EATM,CAAT,CAWA,QAASC,CAAAA,iBAAT,CAA2BJ,IAA3B,CAAgC,CAC5B,MACI,2BAAI,GAAG,CAAEA,IAAI,CAACK,EAAd,CAAkB,KAAK,CAAE,CAACC,MAAM,CAAE,SAAT,CAAzB,CAA8C,OAAO,CAAEC,oBAAoB,CAACC,IAArB,CAA0B,IAA1B,CAAgCR,IAAhC,CAAvD,CAA8F,SAAS,CAAE3B,UAAU,CAAC,kFAAD,CAAqF,kFAArF,CAAyK,CAAC,gBAAiBkB,aAAa,CAACkB,IAAd,CAAmB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,GAAF,GAAUX,IAAI,CAACW,GAAnB,EAApB,CAAlB,CAAzK,CAAnH,EACI,+BACI,4BAAM,SAAS,CAAC,yBAAhB,EAA2CX,IAAI,CAACY,IAAhD,CADJ,CAEI,4BAAM,SAAS,CAAC,MAAhB,EAAwBZ,IAAI,CAACa,IAA7B,CAFJ,CAGI,4BAAM,SAAS,CAAC,uBAAhB,EAAyCb,IAAI,CAACc,OAA9C,CAHJ,CAII,4BAAM,SAAS,CAAC,MAAhB,EAAwBd,IAAI,CAACe,OAA7B,oBAJJ,CAKI,4BAAM,SAAS,CAAC,mBAAhB,cAAyCf,IAAI,CAACgB,GAAL,GAAaC,SAAb,CAAyB,GAAzB,CAA+BjB,IAAI,CAACgB,GAA7E,CALJ,CAMI,4BAAM,SAAS,CAAC,mBAAhB,eAA0ChB,IAAI,CAACkB,OAAL,GAAiB,EAAjB,CAAsB,GAAtB,CAA4BlB,IAAI,CAACkB,OAA3E,CANJ,CAOI,4BAAM,SAAS,CAAC,MAAhB,EAAwBlB,IAAI,CAACmB,IAA7B,CAPJ,CADJ,CADJ,CAaH,CAED,QAASC,CAAAA,aAAT,CAAuBC,UAAvB,CAAkC,CAC9B,GAAIC,CAAAA,UAAU,CAAG7B,WAAjB,CACA,GAAI8B,CAAAA,GAAG,CAAGF,UAAU,CAACL,GAArB,CAEA,GAAGO,GAAG,GAAKN,SAAR,EAAqBM,GAAG,GAAK,GAA7B,EAAoCA,GAAG,GAAK,IAA/C,CACA,CACI3B,QAAQ,CAACd,iBAAiB,CAACwC,UAAD,CAAlB,CAAR,CACA1B,QAAQ,CAAChB,gBAAgB,CAACyC,UAAD,CAAjB,CAAR,CACAlC,iBAAiB,CAACqC,OAAlB,CAA4BrC,iBAAiB,CAACqC,OAAlB,CAA0BC,MAA1B,CAAiCJ,UAAU,CAACT,IAAX,CAAkB,IAAnD,CAA5B,CACA,OACH,CACD,GAAIM,CAAAA,OAAO,CAAGG,UAAU,CAACH,OAAX,GAAuB,GAAvB,CAA6B,IAA7B,CAAoCG,UAAU,CAACH,OAAX,CAAmBQ,KAAnB,CAAyB,EAAzB,EAA6BC,GAA7B,CAAiC,SAAAjB,CAAC,CAAI,CACpF,GAAGA,CAAC,GAAK,GAAT,CACI,MAAO,GAAP,CACJ,MAAOkB,CAAAA,QAAQ,CAAClB,CAAD,CAAf,CACH,CAJiD,CAAlD,CAQA,IAAI,GAAImB,CAAAA,CAAC,CAAG,CAAZ,CAAeA,CAAC,CAAGX,OAAO,CAACY,MAA3B,CAAmC,EAAED,CAArC,CAAuC,CACnC,GAAGP,UAAU,CAACJ,OAAO,CAACW,CAAD,CAAP,CAAa,CAAd,CAAV,CAA2BN,GAAG,CAAG,CAAjC,IAAwC,KAA3C,CAAiD,CAC7CD,UAAU,CAACJ,OAAO,CAACW,CAAD,CAAP,CAAa,CAAd,CAAV,CAA2BN,GAAG,CAAG,CAAjC,EAAsC,IAAtC,CACH,CAFD,IAGI,CACAQ,YAAY,CAACpC,UAAU,CAAC6B,OAAZ,CAAZ,CACA5B,QAAQ,CAACb,mBAAmB,CAAC,KAAD,CAApB,CAAR,CACAY,UAAU,CAAC6B,OAAX,CAAqBQ,UAAU,CAAC,UAAM,CAClCpC,QAAQ,CAACb,mBAAmB,CAAC,IAAD,CAApB,CAAR,CACH,CAF8B,CAE5B,IAF4B,CAA/B,CAGA,OACH,CACJ,CACDa,QAAQ,CAACd,iBAAiB,CAACwC,UAAD,CAAlB,CAAR,CACA1B,QAAQ,CAAChB,gBAAgB,CAACyC,UAAD,CAAjB,CAAR,CACAlC,iBAAiB,CAACqC,OAAlB,CAA4BrC,iBAAiB,CAACqC,OAAlB,CAA0BC,MAA1B,CAAiCJ,UAAU,CAACT,IAAX,CAAkB,IAAnD,CAA5B,CACH,CAED,QAASL,CAAAA,oBAAT,CAA8BP,IAA9B,CAAoC,CAChC,GAAG,CAACT,aAAa,CAACkB,IAAd,CAAmB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,GAAF,GAAUX,IAAI,CAACW,GAAnB,EAApB,CAAJ,CAAgD,CAC5C,GAAGpB,aAAa,CAACkB,IAAd,CAAmB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACG,IAAF,GAAWb,IAAI,CAACa,IAApB,EAApB,CAAH,CAAiD,CAC7CkB,YAAY,CAACpC,UAAU,CAAC6B,OAAZ,CAAZ,CACA5B,QAAQ,CAACb,mBAAmB,CAAC,KAAD,CAApB,CAAR,CACAY,UAAU,CAAC6B,OAAX,CAAqBQ,UAAU,CAAC,UAAM,CAC1BpC,QAAQ,CAACb,mBAAmB,CAAC,IAAD,CAApB,CAAR,CACH,CAFsB,CAEpB,IAFoB,CAA/B,CAGH,CAND,IAOI,CACAqC,aAAa,CAACpB,IAAD,CAAb,CACH,CACJ,CAXD,IAYI,CACA,GAAIsB,CAAAA,UAAU,CAAG7B,WAAjB,CACA,GAAI8B,CAAAA,GAAG,CAAGvB,IAAI,CAACgB,GAAf,CAEA,GAAGO,GAAG,GAAKN,SAAR,EAAqBM,GAAG,GAAK,GAA7B,EAAoCA,GAAG,GAAK,IAA/C,CACA,CACI3B,QAAQ,CAACf,kBAAkB,CAACmB,IAAD,CAAnB,CAAR,CACAb,iBAAiB,CAACqC,OAAlB,CAA4BrC,iBAAiB,CAACqC,OAAlB,CAA0BS,OAA1B,CAAkCjC,IAAI,CAACY,IAAL,CAAY,IAA9C,CAAoD,EAApD,CAA5B,CACA,OACH,CACD,GAAIM,CAAAA,OAAO,CAAGlB,IAAI,CAACkB,OAAL,GAAiB,GAAjB,CAAuB,IAAvB,CAA8BlB,IAAI,CAACkB,OAAL,CAAaQ,KAAb,CAAmB,EAAnB,EAAuBC,GAAvB,CAA2B,SAAAjB,CAAC,CAAI,CACxE,GAAGA,CAAC,GAAK,GAAT,CACI,MAAO,GAAP,CACJ,MAAOkB,CAAAA,QAAQ,CAAClB,CAAD,CAAf,CACH,CAJ2C,CAA5C,CAMA,IAAI,GAAImB,CAAAA,CAAC,CAAG,CAAZ,CAAeA,CAAC,CAAGX,OAAO,CAACY,MAA3B,CAAmC,EAAED,CAArC,CAAuC,CACnCP,UAAU,CAACJ,OAAO,CAACW,CAAD,CAAP,CAAa,CAAd,CAAV,CAA2BN,GAAG,CAAG,CAAjC,EAAsC,KAAtC,CACH,CAED3B,QAAQ,CAACf,kBAAkB,CAACmB,IAAD,CAAnB,CAAR,CACAb,iBAAiB,CAACqC,OAAlB,CAA4BrC,iBAAiB,CAACqC,OAAlB,CAA0BS,OAA1B,CAAkCjC,IAAI,CAACY,IAAL,CAAY,IAA9C,CAAoD,EAApD,CAA5B,CACH,CACJ,CAED,QAASsB,CAAAA,mBAAT,CAA6BxB,CAA7B,CAA+B,CAC3B;AACH,CAED,QAASyB,CAAAA,mBAAT,CAA6BzB,CAA7B,CAA+B,CAC3Bd,QAAQ,CAACnB,YAAY,EAAb,CAAR,CACAiC,CAAC,CAAC0B,cAAF,GACH,CAED,QAASC,CAAAA,cAAT,CAAwB3B,CAAxB,CAA0B,CACtB,GAAI4B,CAAAA,MAAM,CAAGlD,WAAW,CAACmD,MAAZ,CAAmB,SAAAvC,IAAI,CAAI,CACpC,GAAGA,IAAI,CAACY,IAAL,CAAU4B,WAAV,GAAwBC,QAAxB,CAAiC/B,CAAC,CAACgC,MAAF,CAASC,KAAT,CAAeH,WAAf,EAAjC,GAAoExC,IAAI,CAACa,IAAL,CAAU2B,WAAV,GAAwBC,QAAxB,CAAiC/B,CAAC,CAACgC,MAAF,CAASC,KAAT,CAAeH,WAAf,EAAjC,CAAvE,CAAsI,CAClI,MAAO,KAAP,CACH,CACD,MAAO,MAAP,CACH,CALY,CAAb,CAOAtD,aAAa,CAACoD,MAAD,CAAb,CACH,CAED,MACI,gCACI,gCAEQ,CAAC5C,gBAAD,CAEI,2BAAK,KAAK,CAAErB,UAAU,CAAC,8BAAD,CAAtB,CAAwD,IAAI,CAAC,OAA7D,2JAFJ,CAOA,6BAAO,OAAO,CAAC,EAAf,yHATR,CAWI,gCAAU,KAAK,CAAEc,iBAAiB,CAACqC,OAAnC,CAA4C,QAAQ,CAAEU,mBAAtD,CAA2E,SAAS,CAAC,cAArF,CAAoG,EAAE,CAAC,EAAvG,CAA0G,KAAK,CAAE,CAACU,MAAM,CAAE,MAAT,CAAjH,CAAmI,IAAI,CAAC,GAAxI,EAXJ,CAYI,6BAAO,OAAO,CAAC,EAAf,oDAZJ,CAaI,+BACI,6BAAO,QAAQ,CAAEP,cAAjB,CAAiC,SAAS,CAAC,cAA3C,CAA0D,IAAI,CAAC,MAA/D,CAAsE,WAAW,CAAC,QAAlF,CAA2F,aAAW,QAAtG,EADJ,CAEI,2BAAK,SAAS,CAAC,MAAf,EACI,0BAAI,KAAK,CAAE,CAACQ,MAAM,CAAE,MAAT,CAAiBC,QAAQ,CAAE,QAA3B,CAAqCC,SAAS,CAAE,QAAhD,CAAX,CAAsE,SAAS,CAAC,+BAAhF,EACK9D,UAAU,CAAC0C,GAAX,CAAe,SAAAqB,OAAO,CAAI,CACvB,GAAGA,OAAH,CACA,CACI,MAAO5C,CAAAA,iBAAiB,CAAC4C,OAAD,CAAxB,CACH,CACJ,CALA,CADL,CADJ,CAFJ,CAbJ,CA0BI,2BAAK,SAAS,CAAC,oCAAf,EACI,8BAAQ,OAAO,CAAEb,mBAAjB,CAAsC,SAAS,CAAC,cAAhD,CAA+D,IAAI,CAAC,QAApE,yCADJ,CA1BJ,CADJ,CADJ,CAkCH,CAED,cAAenD,CAAAA,aAAf","sourcesContent":["import React,{useState, useEffect, useRef} from 'react';\nimport { render } from '@testing-library/react';\nimport '../css/SubjectPicker.css';\nimport Classnames from 'classnames';\nimport axios from 'axios';\nimport {useSelector, useDispatch} from 'react-redux';\nimport {setTimetable, setListSubject, unsetListSubject, setChosenSubject, unsetChosenSubject, setValidTimetable, setIsValidTimetable} from '../actions/index';\n\nfunction SubjectPicker() {\n\n    const [searchData, setSearchData] = useState([]);\n    const chosenSubjectText = useRef(\"\");\n    const listSubject = useSelector(state => state.listSubjects);\n    const chosenSubject = useSelector(state => state.chosenSubjects);\n    const validMatrix = useSelector(state => state.validMatrix);\n    const isValidTimetable = useSelector(state => state.isValidTimetable);\n    const timeOutObj = useRef();\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        axios.get('http://localhost:7000/api/subjects')\n            .then(res => {\n                dispatch(setListSubject(res.data.subjects));\n                setSearchData(res.data.subjects);\n            })\n            .catch(err=>{\n                throw err;\n            })\n    }, []);\n\n    function renderListSubject(data){\n        return(\n            <li key={data.id} style={{cursor: 'pointer'}} onClick={onSubjectClickHandle.bind(this, data)} className={Classnames(\"list-subject border-left-0 rounded-0 border-right-0 border-top-0 list-group-item\", \"list-subject border-left-0 rounded-0 border-right-0 border-top-0 list-group-item\", {\"custom-active\": chosenSubject.find(e => e._id === data._id)})}>\n                <div>\n                    <span className=\"pr-3 font-weight-bolder\">{data.code}</span>\n                    <span className=\"pr-3\">{data.name}</span>\n                    <span className=\"pr-3 font-weight-bold\">{data.ecturer}</span>\n                    <span className=\"pr-3\">{data.credits} tín chỉ</span>\n                    <span className=\"pr-3 text-subject\">Thứ {data.dow === undefined ? '*' : data.dow}</span>\n                    <span className=\"pr-3 text-subject\">Tiết {data.lessons === \"\" ? '*' : data.lessons}</span>\n                    <span className=\"pr-3\">{data.lang}</span>\n                </div>\n            </li>\n        );\n    }\n\n    function checkingValid(newSubject){\n        let tempMatrix = validMatrix;\n        let day = newSubject.dow;\n\n        if(day === undefined || day === '*' || day === null)\n        {\n            dispatch(setValidTimetable(tempMatrix));\n            dispatch(setChosenSubject(newSubject));\n            chosenSubjectText.current = chosenSubjectText.current.concat(newSubject.code + '\\n');\n            return;\n        }\n        let lessons = newSubject.lessons === '*' ? null : newSubject.lessons.split('').map(e => {\n            if(e === '0')\n                return 10;\n            return parseInt(e);\n        });\n\n        \n\n        for(let i = 0; i < lessons.length; ++i){\n            if(tempMatrix[lessons[i] - 1][day - 2] === false){\n                tempMatrix[lessons[i] - 1][day - 2] = true;\n            }\n            else{\n                clearTimeout(timeOutObj.current);\n                dispatch(setIsValidTimetable(false));\n                timeOutObj.current = setTimeout(() => {\n                    dispatch(setIsValidTimetable(true));\n                }, 5000);\n                return;\n            }\n        }\n        dispatch(setValidTimetable(tempMatrix));\n        dispatch(setChosenSubject(newSubject));\n        chosenSubjectText.current = chosenSubjectText.current.concat(newSubject.code + '\\n');\n    }\n\n    function onSubjectClickHandle(data) {\n        if(!chosenSubject.find(e => e._id === data._id)){\n            if(chosenSubject.find(e => e.name === data.name)){\n                clearTimeout(timeOutObj.current);\n                dispatch(setIsValidTimetable(false));\n                timeOutObj.current = setTimeout(() => {\n                            dispatch(setIsValidTimetable(true));\n                        }, 5000);\n            }\n            else{\n                checkingValid(data);\n            }\n        }\n        else{\n            let tempMatrix = validMatrix;\n            let day = data.dow;\n\n            if(day === undefined || day === '*' || day === null)\n            {\n                dispatch(unsetChosenSubject(data));\n                chosenSubjectText.current = chosenSubjectText.current.replace(data.code + '\\n', '');\n                return;\n            }\n            let lessons = data.lessons === '*' ? null : data.lessons.split('').map(e => {\n                if(e === '0')\n                    return 10;\n                return parseInt(e);\n            });\n\n            for(let i = 0; i < lessons.length; ++i){\n                tempMatrix[lessons[i] - 1][day - 2] = false;\n            }\n            \n            dispatch(unsetChosenSubject(data));\n            chosenSubjectText.current = chosenSubjectText.current.replace(data.code + '\\n', '');\n        }\n    }\n\n    function onSubjectTextHandle(e){\n        //dispatch(setListSubject(e.target.value));\n    }\n\n    function onButtonClickHandle(e){\n        dispatch(setTimetable());\n        e.preventDefault();\n    }\n\n    function onSearchChange(e){\n        let sample = listSubject.filter(data => {\n            if(data.code.toLowerCase().includes(e.target.value.toLowerCase())  ||  data.name.toLowerCase().includes(e.target.value.toLowerCase())){\n                return true;\n            }\n            return false;\n        });\n\n        setSearchData(sample);\n    }\n\n    return(\n        <div>\n            <form>\n                {\n                    !isValidTimetable ? \n                    (\n                        <div class={Classnames(\"alert alert-danger animation\")} role=\"alert\">\n                            Thông tin không hợp lệ (Môn học đã được đăng kí hoặc thời gian bị trùng)\n                        </div>\n                    )\n                    :\n                    <label htmlFor=\"\">Điền mã môn muốn đăng kí (mỗi mã môn nằm trên một dòng)</label>\n                }\n                <textarea value={chosenSubjectText.current} onChange={onSubjectTextHandle} className=\"form-control\" id=\"\" style={{resize: \"none\"}} rows=\"5\"/>\n                <label htmlFor=\"\">Chọn môn muốn đăng kí</label>\n                <div>\n                    <input onChange={onSearchChange} className=\"form-control\" type=\"text\" placeholder=\"Search\" aria-label=\"Search\"/>\n                    <div className=\"mt-2\">\n                        <ul style={{height: '35vh', overflow: 'scroll', overflowX: 'hidden'}} className=\"p-2 border rounded list-group\">\n                            {searchData.map(subject => {\n                                if(subject)\n                                {\n                                    return renderListSubject(subject);\n                                }\n                            })}\n                        </ul>\n                    </div>\n                </div>\n                <div className=\"d-flex justify-content-center mt-3\">\n                    <button onClick={onButtonClickHandle} className=\"btn btn-dark\" type=\"submit\">Tạo thời khoá biểu</button>\n                </div>\n            </form>\n        </div>\n    );\n}\n\nexport default SubjectPicker;"]},"metadata":{},"sourceType":"module"}